<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Demo Casino Online</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background: #111;
  color:#fff;
  text-align:center;
}
header { padding:20px; font-size:28px; font-weight:bold; }
.balance, .level { margin:10px; font-size:20px; }
.games button {
  width:90%; max-width:300px; padding:12px; margin:8px;
  font-size:18px; border:none; border-radius:10px;
  background:linear-gradient(135deg,#ff9800,#ff5722);
  color:#000; font-weight:bold; cursor:pointer;
}
#result { margin:20px; min-height:30px; }
</style>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

</head>
<body>

<header>üåê DEMO CASINO ONLINE</header>

<div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">1000</span></div>
<div class="level">Level: <span id="level">1</span></div>

<div class="games">
  <button onclick="slot()">üé∞ SLOT</button>
  <button onclick="roulette()">üéØ ROULETTE</button>
  <button onclick="dailyBonus()">üéÅ DAILY BONUS</button>
  <button onclick="saveOnlineScore()">üåê SAVE ONLINE SCORE</button>
  <button onclick="showOnlineLeaderboard()">üåê SHOW ONLINE LEADERBOARD</button>
</div>

<div id="result"></div>

<script>

// ====== Firebase config (–≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ) ======
const firebaseConfig = {
  apiKey: "AIzaSyCL_3zOuCZuVywmenJUevWr68ypGm1hSmA",
  authDomain: "ludo-72257.firebaseapp.com",
  databaseURL: "https://ludo-72257-default-rtdb.firebaseio.com",
  projectId: "ludo-72257",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ====== Local Storage ======
let balance = parseInt(localStorage.getItem("balance")) || 1000;
let level = parseInt(localStorage.getItem("level")) || 1;
let exp = parseInt(localStorage.getItem("exp")) || 0;

function saveLocal(){
  localStorage.setItem("balance", balance);
  localStorage.setItem("level", level);
  localStorage.setItem("exp", exp);
}
function updateUI(){
  document.getElementById("balance").innerText = balance;
  document.getElementById("level").innerText = level;
  saveLocal();
}
function showMsg(txt){
  document.getElementById("result").innerText = txt;
}

// ====== Simple games ======
function slot(){
  if(balance<50) return showMsg("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
  balance -= 50; updateUI();
  let win = Math.random()<0.3;
  if(win){ balance+=150; level++; showMsg("üéâ WIN +150"); }
  else showMsg("üò¢ LOSE -50");
  updateUI();
}

function roulette(){
  if(balance<100) return showMsg("‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤");
  balance-=100;
  let win = Math.random()<0.48;
  if(win){ balance+=200; level++; showMsg("üéØ WIN +200"); }
  else showMsg("üéØ LOSE");
  updateUI();
}

function dailyBonus(){
  const last = localStorage.getItem("lastBonus");
  const today = new Date().toDateString();
  if(last === today) return showMsg("‚è≥ –£–∂–µ –ø–æ–ª—É—á–µ–Ω —Å–µ–≥–æ–¥–Ω—è");
  balance += 200;
  localStorage.setItem("lastBonus", today);
  showMsg("üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å +200");
  updateUI();
}

// ====== Online leaderboard ======
function saveOnlineScore(){
  const name = prompt("–í–≤–µ–¥–∏—Ç–µ –∏–º—è –¥–ª—è –æ–Ω–ª–∞–π–Ω —Ç–∞–±–ª–∏—Ü—ã");
  if(!name) return;
  db.ref("leaderboard/"+name).set({
    balance: balance,
    level: level
  });
  showOnlineLeaderboard();
}

function showOnlineLeaderboard(){
  db.ref("leaderboard").orderByChild("balance").limitToLast(10).once("value", snapshot => {
    const data = snapshot.val();
    if(!data) return showMsg("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–Ω–ª–∞–π–Ω");
    const arr = Object.entries(data).sort((a,b)=>b[1].balance - a[1].balance);
    let html = "<h3>üåê ONLINE LEADERBOARD</h3><ol>";
    arr.forEach(([name,val]) => {
      html += `<li>${name}: ${val.balance} üí∞ (Lvl: ${val.level})</li>`;
    });
    html += "</ol>";
    document.getElementById("result").innerHTML = html;
  });
}

updateUI();

</script>

</body>
</html>
